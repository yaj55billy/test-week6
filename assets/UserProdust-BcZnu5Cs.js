import{M as g}from"./MessageToast-xxi930Yn.js";import{_ as v,r as _,o as f,c as b,b as h,a as t,t as i,f as y,v as x,F as L}from"./index-HISvCZDr.js";let m="";const d="https://ec-course-api.hexschool.io/v2",p="dollob_api",w={data(){return{product:{},qty:1,isLoading:!1}},methods:{get_product(){this.isLoading=!0;const e=`${d}/api/${p}/product/${m}`;this.axios.get(e).then(o=>{const{product:n}=o.data;this.product=n}).catch(o=>{alert(o)}).finally(()=>{this.isLoading=!1})},add_cart(e,o=1,n){let c="",s="";const r=`加入購物車成功，新增${o}筆商品~~`;this.isLoading=!0,n==="new"?(c=`${d}/api/${p}/cart`,s="post"):(c=`${d}/api/${p}/cart/${n}`,s="put");const l={product_id:e,qty:o};this.axios[s](c,{data:l}).then(a=>{this.toastMsg(r)}).catch(a=>{alert(a)}).finally(()=>{this.isLoading=!1})},toastMsg(e){this.$refs.messageToast.show_toast(e)}},mounted(){m=this.$route.params.id,this.get_product()},components:{MessageToast:g}},M=t("h3",null,"產品列表",-1),V={class:"container"},T={class:"bg-primary text-white rounded-pill py-1 mb-1"},U={class:"h5 mb-0"},k={class:"row"},q={class:"col-sm-6"},B=["src"],$={class:"col-sm-6 text-start"},C={class:"badge bg-primary rounded-pill"},D={class:"h6"},F={class:"h5"},N={class:"input-group"};function P(e,o,n,c,s,r){const l=_("VueLoading"),a=_("message-toast");return f(),b(L,null,[M,h(l,{active:s.isLoading},null,8,["active"]),t("div",V,[h(a,{ref:"messageToast"},null,512),t("div",T,[t("div",U,[t("span",null,i(s.product.title),1)])]),t("div",null,[t("div",k,[t("div",q,[t("img",{class:"img-fluid",src:s.product.imageUrl,alt:""},null,8,B)]),t("div",$,[t("span",C,i(s.product.category),1),t("p",null,"商品描述："+i(s.product.description),1),t("p",null,"商品內容："+i(s.product.content),1),t("del",D,"原價 "+i(s.product.origin_price)+" 元",1),t("div",F,"現在只要 "+i(s.product.price)+" 元",1),t("div",null,[t("div",N,[y(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":o[0]||(o[0]=u=>s.qty=u)},null,512),[[x,s.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=u=>r.add_cart(s.product.id,s.qty,"new"))},"加入購物車")])])])])])])],64)}const j=v(w,[["render",P]]);export{j as default};
